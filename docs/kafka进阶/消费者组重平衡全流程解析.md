## Rebalance
重平衡的作用是让组内所有的消费者实例就消费那些主题分区达成一致。重平衡需要借助
broker 端的Coordinator组件，在Coordinator 的帮助下完成整个消费者组的分区重分配。

[什么是消费者组](../clients/什么是消费者组.md)
## 消费者端重平衡流程
重平衡的完整流程需要消费者端和协调者组件共同参与完成。
在消费者端，重平衡分为2个步骤：分别是加入组和等待领导消费者分配方案，这两个步骤分别对应
两类特定的请求：JoinGroup 请求和SyncGroup 请求。当组成员加入组时，它会向协调者发送JoinGroup
请求。在该请求中，每个成员都要将自己订阅的主题上报，这样协调者就能收集到所有成员的订阅
信息。一旦收集完成全部成员的JoinGroup 请求后，协调者会从这些成员中选择一个担任这个消费者组的领导者。

选出领导者后，协调者会把消费者组订阅消息封装仅JoinGroup 请求的响应体中，然后发给领导者，
由领导者统一做出分配方案后，进入下一步：发送SyncGroup 请求。

在这一步中，领导者向协调者发送SyncGroup 请求，将刚做出的分配方案发给协调者。目的是为了让协调者接收
分配方案，然后统一以SyncGroup 响应的方式发给所有成员，这样组内所有成员自己该消费那些分区了。当所有成员
都成功接收到分配方案后，消费者组进入stable 状态，即开始正常的消费工作。
## Broker 端重平衡  
